@model Onboarding.Models.Test

@{
    ViewData["Title"] = "Create Test";
}

<h1>Create Test</h1>
<form asp-action="Create" method="post">
    <div class="form-group">
        <label for="Name">Nazwa testu</label>
        <input type="text" class="form-control" id="Name" name="Name" value="@Model.Name" required />
    </div>

    <div class="form-group">
        <label for="CourseId">Kurs</label>
        <select class="form-control" id="CourseId" name="CourseId" required>
            <option value="">Wybierz kurs</option>
            @foreach (var course in ViewBag.CourseId as SelectList)
            {
                <option value="@course.Value">@course.Text</option>
            }
        </select>
    </div>

    <h3>Pytania</h3>
    <div id="questions-container">
        <!-- Pytania będą dynamicznie dodawane tutaj -->
    </div>

    <button type="button" class="btn btn-secondary" onclick="addQuestion()">Dodaj pytanie</button>

    <button type="submit" class="btn btn-primary">Dodaj test</button>
</form>

<script>
    let questionIndex = 0;

    function addQuestion() {
        const container = document.getElementById("questions-container");

        const questionHtml = `
                    <div class="question-group mt-3 p-3 border rounded">
                        <label>Pytanie:</label>
                        <input type="text" class="form-control" name="Questions[${questionIndex}].Description" required />

                        <label>Odpowiedź A:</label>
                        <input type="text" class="form-control" name="Questions[${questionIndex}].AnswerA" required />

                        <label>Odpowiedź B:</label>
                        <input type="text" class="form-control" name="Questions[${questionIndex}].AnswerB" required />

                        <label>Odpowiedź C:</label>
                        <input type="text" class="form-control" name="Questions[${questionIndex}].AnswerC" required />

                        <label>Odpowiedź D:</label>
                        <input type="text" class="form-control" name="Questions[${questionIndex}].AnswerD" required />

                        <label>Poprawna odpowiedź:</label>
                        <select class="form-control" name="Questions[${questionIndex}].CorrectAnswer">
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                        </select>

                        <button type="button" class="btn btn-danger mt-2" onclick="removeQuestion(this)">Usuń</button>
                    </div>
                `;

        container.insertAdjacentHTML("beforeend", questionHtml);
        questionIndex++;
    }

    function removeQuestion(button) {
        button.parentElement.remove();
    }
</script>
